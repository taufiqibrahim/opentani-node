{"version":3,"sources":["../../../src/routes/user/profile.js"],"names":["router","require","Router","Sequelize","bcrypt","models","middleware","get","verifyToken","req","res","User","findOne","where","id","decoded","user","then","json","status","text","username","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,SAASC,QAAQ,SAAR,EAAmBC,MAAnB,EAAb;AACA,IAAIC,YAAYF,QAAQ,WAAR,CAAhB;AACA,IAAIG,SAASH,QAAQ,QAAR,CAAb;AACA,IAAII,SAASJ,QAAQ,2BAAR,CAAb;AACA,IAAIK,aAAaL,QAAQ,8BAAR,CAAjB;;AAEAD,OAAOO,GAAP,CAAW,UAAX,EAAuBD,WAAWE,WAAlC,EAA+C,UAASC,GAAT,EAAcC,GAAd,EAAmB;;AAEjE;AACAL,QAAOM,IAAP,CAAYC,OAAZ,CAAoB;AACnBC,SAAO;AACNC,OAAIL,IAAIM,OAAJ,CAAYC;AADV;AADY,EAApB,EAIGC,IAJH,CAIQ,UAASD,IAAT,EAAe;AACtB,MAAI,CAACA,IAAL,EAAW;AACVN,OAAIQ,IAAJ,CAAS;AACRC,YAAQ,GADA;AAERC,UAAM;AAFE,IAAT;AAIA,GALD,MAKM;AACLV,OAAIQ,IAAJ,CAAS;AACRC,YAAQ,GADA;AAERC,UAAM,aAAaJ,KAAKK;AAFhB,IAAT;AAIA;AACD,EAhBD;AAiBA,CApBD;;AAsBAC,OAAOC,OAAP,GAAiBvB,MAAjB","file":"profile.js","sourcesContent":["'use strict';\r\n\r\nvar router = require('express').Router();\r\nvar Sequelize = require('sequelize');\r\nvar bcrypt = require('bcrypt')\r\nvar models = require('../../server/models/index');\r\nvar middleware = require('../../middlewares/middleware');\r\n\r\nrouter.get('/profile', middleware.verifyToken, function(req, res) {\r\n\t\r\n\t// Find user by id\r\n\tmodels.User.findOne({\r\n\t\twhere: {\r\n\t\t\tid: req.decoded.user\r\n\t\t}\r\n\t}).then(function(user) {\r\n\t\tif (!user) {\r\n\t\t\tres.json({\r\n\t\t\t\tstatus: 404,\r\n\t\t\t\ttext: \"Internal error. User not found\"\r\n\t\t\t});\r\n\t\t}else {\r\n\t\t\tres.json({\r\n\t\t\t\tstatus: 200,\r\n\t\t\t\ttext: \"Welcome \" + user.username\r\n\t\t\t});\r\n\t\t}\r\n\t})\r\n});\r\n\r\nmodule.exports = router"]}